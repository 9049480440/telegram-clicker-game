<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–ª–∏–∫–µ—Ä —Å—É–¥—å–±—ã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, linear-gradient(135deg, #667eea 0%, #764ba2 100%));
            color: var(--tg-theme-text-color, #fff);
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        .header {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .brand-text {
            font-size: 14px;
            font-weight: 600;
            color: var(--tg-theme-text-color, #fff);
            margin-bottom: 8px;
        }

        .subscribe-btn {
            background: linear-gradient(45deg, #00c6ff, #0072ff);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .subscribe-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 114, 255, 0.3);
        }

        .game-container {
            position: relative;
            height: calc(100vh - 70px);
            overflow: hidden;
        }

        .game-ui {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timer, .score {
            background: rgba(0, 0, 0, 0.7);
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            color: white;
            backdrop-filter: blur(10px);
        }

        .game-area {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            cursor: pointer;
        }

        .game-element {
            position: absolute;
            width: 60px;
            height: 60px;
            cursor: pointer;
            animation: appear 0.3s ease-out, disappear 1.5s ease-in 0.3s forwards;
            z-index: 10;
        }

        .game-element.golden {
            animation: appear 0.3s ease-out, goldenPulse 1.5s ease-in-out infinite, disappear 1.5s ease-in 0.3s forwards;
        }

        .element-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
        }

        .element-circle:hover {
            transform: scale(1.1);
        }

        .element-star {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #feca57, #ff9ff3);
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
        }

        .element-star:hover {
            transform: scale(1.1);
        }

        .element-heart {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff6b9d, #c44569);
            position: relative;
            transform: rotate(-45deg);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
        }

        .element-heart:before,
        .element-heart:after {
            content: '';
            width: 30px;
            height: 48px;
            position: absolute;
            left: 30px;
            top: 0;
            background: linear-gradient(45deg, #ff6b9d, #c44569);
            border-radius: 30px 30px 0 0;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }

        .element-heart:after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        .element-heart:hover {
            transform: rotate(-45deg) scale(1.1);
        }

        .golden {
            filter: hue-rotate(45deg) saturate(1.5) brightness(1.2);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        .prediction-popup {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 15px;
            font-size: 16px;
            max-width: 300px;
            text-align: center;
            z-index: 1000;
            animation: popupAppear 0.5s ease-out, popupDisappear 0.5s ease-in 2s forwards;
            backdrop-filter: blur(10px);
        }

        .end-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
            backdrop-filter: blur(20px);
        }

        .end-screen.hidden {
            display: none;
        }

        .final-score {
            font-size: 48px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .end-message {
            font-size: 24px;
            margin-bottom: 30px;
            text-align: center;
            max-width: 300px;
        }

        .end-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #00c6ff, #0072ff);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 150;
            backdrop-filter: blur(20px);
        }

        .start-screen.hidden {
            display: none;
        }

        .game-title {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .game-instructions {
            font-size: 16px;
            text-align: center;
            margin-bottom: 30px;
            max-width: 300px;
            line-height: 1.6;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: particle 1s ease-out forwards;
        }

        @keyframes appear {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes disappear {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.5); }
        }

        @keyframes goldenPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes popupAppear {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        @keyframes popupDisappear {
            from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            to { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }

        @keyframes particle {
            0% { opacity: 1; transform: translate(0, 0); }
            100% { opacity: 0; transform: translate(var(--random-x), var(--random-y)); }
        }

        @media (max-width: 480px) {
            .game-element {
                width: 50px;
                height: 50px;
            }
            
            .timer, .score {
                padding: 10px 16px;
                font-size: 16px;
            }
            
            .final-score {
                font-size: 36px;
            }
            
            .game-title {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="brand-text">–ö–µ–π—Å –æ—Ç –∫–∞–Ω–∞–ª–∞ "AI –¥–ª—è –ø—Ä–æ–¥–∞–∫—Ç–∞"</div>
        <a href="https://t.me/aiforproduct" class="subscribe-btn" target="_blank">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª</a>
    </div>

    <div class="game-container">
        <div class="start-screen" id="startScreen">
            <div class="game-title">üéØ –ö–ª–∏–∫–µ—Ä —Å—É–¥—å–±—ã</div>
            <div class="game-instructions">
                –ö–ª–∏–∫–∞–π –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º –∏ –ø–æ–ª—É—á–∞–π –æ—á–∫–∏!<br>
                –ó–æ–ª–æ—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–∞—é—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å—É–¥—å–±—ã.<br>
                –£ —Ç–µ–±—è –µ—Å—Ç—å 30 —Å–µ–∫—É–Ω–¥!
            </div>
            <button class="btn btn-primary" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>

        <div class="game-ui">
            <div class="timer" id="timer">30</div>
            <div class="score" id="score">0</div>
        </div>

        <div class="game-area" id="gameArea"></div>

        <div class="end-screen hidden" id="endScreen">
            <div class="final-score" id="finalScore">0</div>
            <div class="end-message" id="endMessage">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</div>
            <div class="end-buttons">
                <button class="btn btn-primary" onclick="restartGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                <button class="btn btn-secondary" onclick="shareResult()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            </div>
        </div>
    </div>

    <script>
        const predictions = [
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã —Ç–æ—á–Ω–æ –Ω–µ –∑–∞–±—É–¥–µ—à—å –ø–æ–∫–æ—Ä–º–∏—Ç—å –∫–æ—Ç–∞",
            "–¢–≤–æ—è —Ö–∞—Ä–∏–∑–º–∞ –∑–∞—à–∫–∞–ª–∏–≤–∞–µ—Ç (–ø–æ—á—Ç–∏)",
            "–£–¥–∞—á–∞ –ø—Ä–∏–¥–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –æ–ø–æ–∑–¥–∞—Ç—å –Ω–∞ 5 –º–∏–Ω—É—Ç",
            "–¢–≤–æ–π –∫–æ—Ñ–µ –±—É–¥–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –º–∞—Å—Ç–µ—Ä –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –ø–∞—Ä–∫–æ–≤–∫–∏",
            "–¢–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 146%",
            "–°–µ–≥–æ–¥–Ω—è –≤—Å–µ –ª–∏—Ñ—Ç—ã –ø—Ä–∏–µ–¥—É—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ",
            "–¢–≤–æ—è –ø—Ä–∏—á–µ—Å–∫–∞ –±—É–¥–µ—Ç –∏–¥–µ–∞–ª—å–Ω–∞ –¥–∞–∂–µ –ø–æ—Å–ª–µ —Å–Ω–∞",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –Ω–∞–π–¥–µ—à—å –¥–µ–Ω—å–≥–∏ –≤ —Å—Ç–∞—Ä–æ–π –∫—É—Ä—Ç–∫–µ",
            "–¢–≤–æ—è –ª—é–±–∏–º–∞—è –ø–µ—Å–Ω—è –∑–∞–∏–≥—Ä–∞–µ—Ç –≤ —Ä–∞–¥–∏–æ",
            "–°–µ–≥–æ–¥–Ω—è —Å–≤–µ—Ç–æ—Ñ–æ—Ä—ã –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –∑–µ–ª–µ–Ω—ã–º–∏",
            "–¢–≤–æ—è –ø–∏—Ü—Ü–∞ –ø—Ä–∏–µ–¥–µ—Ç —Ç–æ—á–Ω–æ –≤ —Å—Ä–æ–∫",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –≤—Å–ø–æ–º–Ω–∏—à—å –∑–∞–±—ã—Ç—ã–π –ø–∞—Ä–æ–ª—å",
            "–¢–≤–æ—è –±–∞—Ç–∞—Ä–µ–π–∫–∞ –∑–∞—Ä—è–¥–∏—Ç—Å—è –∑–∞ —Ä–µ–∫–æ—Ä–¥–Ω–æ–µ –≤—Ä–µ–º—è",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –±—É–¥–µ—à—å —Ç–∞–Ω—Ü–µ–≤–∞—Ç—å –≤ –ª–∏—Ñ—Ç–µ",
            "–¢–≤–æ–∏ –Ω–æ—Å–∫–∏ –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –Ω–∞–π–¥—É—Ç —Å–≤–æ–∏ –ø–∞—Ä—ã",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –ø–æ–ª—É—á–∏—à—å –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç –æ—Ç –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–∞",
            "–¢–≤–æ—è —É–¥–∞—á–∞ —Å–∏–ª—å–Ω–µ–µ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –Ω–∞–π–¥–µ—à—å –∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –ø–∞—Ä–∫–æ–≤–∫–∏",
            "–¢–≤–æ—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–∫–æ—Ä–æ—Å—Ç—å –±—É–¥–µ—Ç –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –ø–æ–π–º–∞–µ—à—å –ø–∞–¥–∞—é—â–∏–π –ø—Ä–µ–¥–º–µ—Ç",
            "–¢–≤–æ—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞—à–∫–∞–ª–∏–≤–∞–µ—Ç",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã —É–≥–∞–¥–∞–µ—à—å –≤—Å–µ –ø–∏–Ω—ã —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞",
            "–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –ø–æ–ª—É—á–∏—à—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—É—é —Ö–æ—Ä–æ—à—É—é –Ω–æ–≤–æ—Å—Ç—å",
            "–¢–≤–æ—è –ø–∞–º—è—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å—É–ø–µ—Ä–∫–æ–º–ø—å—é—Ç–µ—Ä",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –Ω–∞–π–¥–µ—à—å —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ",
            "–¢–≤–æ—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏ –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –±—É–¥–µ—à—å —Å–º–µ—è—Ç—å—Å—è –Ω–∞–¥ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —à—É—Ç–∫–∞–º–∏",
            "–¢–≤–æ—è –∞—É—Ä–∞ —Å–≤–µ—Ç–∏—Ç—Å—è —è—Ä—á–µ –Ω–µ–æ–Ω–∞",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã —Ä–µ—à–∏—à—å —Å–ª–æ–∂–Ω—É—é –∑–∞–¥–∞—á—É –∏–≥—Ä–∞—é—á–∏",
            "–¢–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è –ø–æ–¥—Å–∫–∞–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –±—É–¥–µ—à—å –º–∞–≥–Ω–∏—Ç–æ–º –¥–ª—è –ø–æ–∑–∏—Ç–∏–≤–∞",
            "–¢–≤–æ—è —É–ª—ã–±–∫–∞ –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –Ω–∞–π–¥–µ—à—å –ø–æ—Ç–µ—Ä—è–Ω–Ω—É—é –≤–µ—â—å",
            "–¢–≤–æ—è –º–æ—Ç–∏–≤–∞—Ü–∏—è –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –±—É–¥–µ—à—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º –∏–¥–µ–π",
            "–¢–≤–æ—è —Ö–∞—Ä–∏–∑–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–µ",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –ø–æ–ª—É—á–∏—à—å –∑–∞—Ä—è–¥ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è",
            "–¢–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è —Ç–æ—á–Ω–µ–µ GPS",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –±—É–¥–µ—à—å –≤ —Ü–µ–Ω—Ç—Ä–µ –≤–Ω–∏–º–∞–Ω–∏—è",
            "–¢–≤–æ—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–µ –∑–Ω–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –Ω–∞–π–¥–µ—à—å –±–∞–ª–∞–Ω—Å –≤–æ –≤—Å–µ–º",
            "–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –ø–∏—Ç–∞–µ—Ç –æ–∫—Ä—É–∂–∞—é—â–∏—Ö",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –±—É–¥–µ—à—å –º–∞—Å—Ç–µ—Ä–æ–º —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç–∏",
            "–¢–≤–æ—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ—Ä–∞–∂–∞–µ—Ç",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –ø–æ–ª—É—á–∏—à—å –¥–æ–∑—É –≤–æ–ª—à–µ–±—Å—Ç–≤–∞",
            "–¢–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç—É—Ä–±–æ-—Ä–µ–∂–∏–º–µ",
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã –±—É–¥–µ—à—å –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä–æ–º —É–ª—ã–±–æ–∫",
            "–¢–≤–æ—è –ø–æ–∑–∏—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞ –∫–∞–∫ —Å–º–µ—Ö"
        ];

        let gameState = {
            score: 0,
            timeLeft: 30,
            gameActive: false,
            spawnRate: 1000,
            elements: [],
            gameTimer: null,
            spawnTimer: null,
            goldenCount: 0
        };

        const elementTypes = [
            { type: 'circle', emoji: 'üî¥', class: 'element-circle' },
            { type: 'star', emoji: '‚≠ê', class: 'element-star' },
            { type: 'heart', emoji: '‚ù§Ô∏è', class: 'element-heart' }
        ];

        function startGame() {
            document.getElementById('startScreen').classList.add('hidden');
            gameState = {
                score: 0,
                timeLeft: 30,
                gameActive: true,
                spawnRate: 1000,
                elements: [],
                gameTimer: null,
                spawnTimer: null,
                goldenCount: 0
            };
            
            updateUI();
            startGameTimer();
            spawnElements();
        }

        function startGameTimer() {
            gameState.gameTimer = setInterval(() => {
                gameState.timeLeft--;
                updateUI();
                
                if (gameState.timeLeft <= 0) {
                    endGame();
                }
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                gameState.spawnRate = Math.max(250, 1000 - (30 - gameState.timeLeft) * 25);
                
                // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –ø–æ—è–≤–ª–µ–Ω–∏—è —Å –Ω–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
                if (gameState.spawnTimer) {
                    clearInterval(gameState.spawnTimer);
                    spawnElements();
                }
            }, 1000);
        }

        function spawnElements() {
            gameState.spawnTimer = setInterval(() => {
                if (gameState.gameActive) {
                    createRandomElement();
                }
            }, gameState.spawnRate);
        }

        function createRandomElement() {
            const gameArea = document.getElementById('gameArea');
            const element = document.createElement('div');
            const elementType = elementTypes[Math.floor(Math.random() * elementTypes.length)];
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –±—É–¥–µ—Ç –ª–∏ —ç–ª–µ–º–µ–Ω—Ç –∑–æ–ª–æ—Ç—ã–º
            const isGolden = Math.random() < 0.1 && gameState.goldenCount < 3;
            if (isGolden) gameState.goldenCount++;
            
            element.className = `game-element ${isGolden ? 'golden' : ''}`;
            element.innerHTML = `<div class="${elementType.class}"></div>`;
            
            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
            const maxX = gameArea.offsetWidth - 60;
            const maxY = gameArea.offsetHeight - 60;
            element.style.left = Math.random() * maxX + 'px';
            element.style.top = Math.random() * maxY + 'px';
            
            element.addEventListener('click', (e) => {
                e.stopPropagation();
                clickElement(element, isGolden);
            });
            
            gameArea.appendChild(element);
            
            // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç —á–µ—Ä–µ–∑ 1.8 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (element.parentNode) {
                    element.parentNode.removeChild(element);
                }
            }, 1800);
        }

        function clickElement(element, isGolden) {
            const points = isGolden ? 50 : 10;
            gameState.score += points;
            
            // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã
            createParticles(element);
            
            // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç
            element.parentNode.removeChild(element);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è –∑–æ–ª–æ—Ç—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            if (isGolden) {
                showPrediction();
            }
            
            updateUI();
        }

        function createParticles(element) {
            const rect = element.getBoundingClientRect();
            const gameArea = document.getElementById('gameArea');
            
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = (rect.left + rect.width / 2 - gameArea.offsetLeft) + 'px';
                particle.style.top = (rect.top + rect.height / 2 - gameArea.offsetTop) + 'px';
                
                const randomX = (Math.random() - 0.5) * 100;
                const randomY = (Math.random() - 0.5) * 100;
                particle.style.setProperty('--random-x', randomX + 'px');
                particle.style.setProperty('--random-y', randomY + 'px');
                
                gameArea.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 1000);
            }
        }

        function showPrediction() {
            const prediction = predictions[Math.floor(Math.random() * predictions.length)];
            const popup = document.createElement('div');
            popup.className = 'prediction-popup';
            popup.textContent = prediction;
            
            document.getElementById('gameArea').appendChild(popup);
            
            setTimeout(() => {
                if (popup.parentNode) {
                    popup.parentNode.removeChild(popup);
                }
            }, 2500);
        }

        function updateUI() {
            document.getElementById('timer').textContent = gameState.timeLeft;
            document.getElementById('score').textContent = gameState.score;
        }

        function endGame() {
            gameState.gameActive = false;
            clearInterval(gameState.gameTimer);
            clearInterval(gameState.spawnTimer);
            
            // –û—á–∏—â–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            const gameArea = document.getElementById('gameArea');
            const elements = gameArea.querySelectorAll('.game-element');
            elements.forEach(el => el.remove());
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            document.getElementById('finalScore').textContent = gameState.score;
            
            let message = "–ù–µ–ø–ª–æ—Ö–æ!";
            if (gameState.score >= 500) message = "–ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! –¢—ã –º–∞—Å—Ç–µ—Ä —Å—É–¥—å–±—ã!";
            else if (gameState.score >= 300) message = "–û—Ç–ª–∏—á–Ω–æ! –£–¥–∞—á–∞ –Ω–∞ —Ç–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω–µ!";
            else if (gameState.score >= 150) message = "–•–æ—Ä–æ—à–æ! –¢–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!";
            
            document.getElementById('endMessage').textContent = message;
            document.getElementById('endScreen').classList.remove('hidden');
        }

        function restartGame() {
            document.getElementById('endScreen').classList.add('hidden');
            startGame();
        }

        function shareResult() {
            const shareText = `üéØ –Ø –Ω–∞–±—Ä–∞–ª ${gameState.score} –æ—á–∫–æ–≤ –≤ –∏–≥—Ä–µ "–ö–ª–∏–∫–µ—Ä —Å—É–¥—å–±—ã"! –ü–æ–ø—Ä–æ–±—É–π –ø—Ä–µ–≤–∑–æ–π—Ç–∏ –º–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! üîÆ`;
            
            if (window.Telegram && window.Telegram.WebApp) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram Web App
                try {
                    // –ú–µ—Ç–æ–¥ 1: –ü—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
                    if (window.Telegram.WebApp.sendData) {
                        window.Telegram.WebApp.sendData(JSON.stringify({
                            action: 'share_result',
                            text: shareText,
                            score: gameState.score
                        }));
                    } 
                    // –ú–µ—Ç–æ–¥ 2: –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
                    else if (window.Telegram.WebApp.openTelegramLink) {
                        const encodedText = encodeURIComponent(shareText);
                        window.Telegram.WebApp.openTelegramLink(`https://t.me/share/url?url=${window.location.href}&text=${encodedText}`);
                    }
                    // –ú–µ—Ç–æ–¥ 3: –ü–æ–∫–∞–∑–∞—Ç—å popup —Å —Ç–µ–∫—Å—Ç–æ–º –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
                    else {
                        window.Telegram.WebApp.showPopup({
                            title: '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º',
                            message: `–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –¥—Ä—É–∑—å—è–º:\n\n${shareText}`,
                            buttons: [
                                { id: 'copy', type: 'default', text: '–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å' },
                                { type: 'cancel', text: '–ó–∞–∫—Ä—ã—Ç—å' }
                            ]
                        }, (buttonId) => {
                            if (buttonId === 'copy') {
                                copyToClipboard(shareText);
                            }
                        });
                    }
                } catch (error) {
                    // Fallback –¥–ª—è –æ—à–∏–±–æ–∫
                    copyToClipboard(shareText);
                }
            } 
            // –î–ª—è –æ–±—ã—á–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ —Å Web Share API
            else if (navigator.share) {
                navigator.share({
                    title: '–ö–ª–∏–∫–µ—Ä —Å—É–¥—å–±—ã',
                    text: shareText,
                    url: window.location.href
                }).catch(() => {
                    copyToClipboard(shareText);
                });
            } 
            // Fallback –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
            else {
                copyToClipboard(shareText);
            }
        }

        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text)
                    .then(() => {
                        showNotification('–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞! üìã');
                    })
                    .catch(() => {
                        fallbackCopy(text);
                    });
            } else {
                fallbackCopy(text);
            }
        }

        function fallbackCopy(text) {
            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showNotification('–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! üìã');
            } catch (err) {
                showNotification(`–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${gameState.score} –æ—á–∫–æ–≤! üéØ`);
            }
            
            document.body.removeChild(textArea);
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                font-size: 16px;
                z-index: 1001;
                backdrop-filter: blur(10px);
                animation: popupAppear 0.3s ease-out;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'popupDisappear 0.3s ease-in forwards';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 2000);
        }

        // Telegram Web App –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            window.Telegram.WebApp.expand();
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É Telegram
            const themeParams = window.Telegram.WebApp.themeParams;
            if (themeParams.bg_color) {
                document.body.style.background = themeParams.bg_color;
            }
            if (themeParams.text_color) {
                document.body.style.color = themeParams.text_color;
            }
        }

        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∑—É–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        });

        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        });
    </script>
</body>
</html>
